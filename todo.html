<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docs</title>
</head>
<body>
    <p>Todo list practice 1</p>
    <input placeholder="to do list" class="textfield" type="text"> 
    <input type="date" class="duedate"> 
    <button class="add-button">Add</button>
    <div class="list"></div>
    <script>
  
        const myArray = [];
        let field = document.querySelector('.field');
        let add_button = document.querySelector('.add-button');

        let showAddedInput = () => {
            let list = document.querySelector('.list');
            let todoList = '';
            /*
            for(let i = 0; i < myArray.length; i++){
                let todoObject = myArray[i];
                const {name, dueDate} = todoObject;

                let html = `<p>${name} ${dueDate} <button onclick="myArray.splice(${i},1); showAddedInput();">delete</button> </p>`
                todoList += html;
            }*/
            
            myArray.forEach((value, index) => {
                const {name, dueDate} = value;
                let html = `<p>${dueDate} ${name} <button class="delete-button">delete</button> </p>`;
                todoList += html;
            })

            list.innerHTML = todoList;

            let delete_button = document.querySelectorAll('.delete-button');
            delete_button.forEach((deleteButton, index) => {
                deleteButton.addEventListener('click', () => {
                    myArray.splice(index,1);
                    showAddedInput();
                })
            })

        }

        function addInsideTheArray(){
            let textfield = document.querySelector('.textfield');
            let datefield = document.querySelector('.duedate');
            let name = datefield.value;
            let dueDate = textfield.value;    

            myArray.push({name, dueDate});
            textfield.value = '';
           
            showAddedInput()
        }

        add_button.addEventListener('click', () => addInsideTheArray())
    </script>
</body>
</html>